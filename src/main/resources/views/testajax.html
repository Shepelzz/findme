<!DOCTYPE HTML>

<html>
<head>
    <title>Spring Boot - AJAX POST GET Example</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"/>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>


</head>
<body>

<div class="container">

    <h3 style="color:blue">POST-GET AJAX Example</h3>

    <div>
        <form class="form-inline" style="margin:20px 20px 20px 20px" id="customerForm">
            <div class="form-group">
                <label for="firstname" style="margin-right:5px">FirstName:</label>
                <input type="text" class="form-control" id="firstname" placeholder="Enter FirstName"/>
            </div>
            <div class="form-group">
                <label for="lastname" style="margin-left:20px; margin-right:5px">LastName:</label>
                <input type="text" class="form-control" id="lastname" placeholder="Enter LastName"/>
            </div>
            <button type="submit" class="btn btn-default" style="margin-left:20px; margin-right:5px">Submit</button>
        </form>
    </div>

    <div class="col-sm-7" id="postResultDiv">
    </div>

    <div class="col-sm-7" style="margin:20px 0px 20px 0px">
        <button id="getAllCustomerId" type="button" class="btn btn-primary">Get All Customers</button>
        <div id="getResultDiv" style="padding:20px 10px 20px 50px">
            <ul class="list-group">
            </ul>
        </div>
    </div>

</div>
</body>

<script>

    $( document ).ready(function() {

        // SUBMIT FORM
        $("#customerForm").submit(function(event) {
            // Prevent the form from submitting via the browser.
            event.preventDefault();
            ajaxPost();
        });


        function ajaxPost(){

            // PREPARE FORM DATA
            var formData = {
                firstname : $("#firstname").val(),
                lastname :  $("#lastname").val()
            }

            // DO POST
            $.ajax({
                type : "POST",
                contentType : "application/json",
                url : window.location + "/api/customer/save",
                data : JSON.stringify(formData),
                dataType : 'json',
                success : function(result) {
                    // if(result.status == "Done"){
                        $("#postResultDiv").html("<p style='background-color:#7FA7B0; color:white; padding:20px 20px 20px 20px'>" +
                            "Post Successfully! <br>" +
                            "---> Customer's Info: FirstName = " +
                            result.firstname + " ,LastName = " + result.lastname + "</p>");
                    // }else{
                    //     $("#postResultDiv").html("<strong>Error</strong>");
                    // }
                    console.log(result);
                },
                error : function(e) {
                    alert("Error!")
                    console.log("ERROR: ", e);
                }
            });

            // Reset FormData after Posting
            resetData();

        }

        function resetData(){
            $("#firstname").val("");
            $("#lastname").val("");
        }
    })

    $( document ).ready(function() {

        // GET REQUEST
        $("#getAllCustomerId").click(function(event){
            event.preventDefault();
            ajaxGet();
        });

        // DO GET
        function ajaxGet(){
            $.ajax({
                type : "GET",
                url : window.location + "/api/customer/all",
                success: function(result){
                    // if(result.status == "Done"){

                    alert(JSON.stringify(result));
                    //
                    // $.each(result, function (i, customer) {
                    //     alert(JSON.stringify(customer));
                    //     var customerInfo = "- Customer with Id = " + i + ", firstname = " + customer.firstname + ", lastName = " + customer.lastname + "<br>";
                    //     alert(customerInfo);
                    // })

                    // $('#getResultDiv ul').empty();
                    // var custList = "";
                    // $.each(result, function(i, post){
                    //     // var customer1 = "- Customer with Id = " + i + ", firstname = " + customer.firstname + ", lastName = " + customer.lastname + "<br>";
                    //     var postInfo = "<div class='w3-container w3-white w3-margin' style='position: relative'>\n" +
                    //         "                    <div>" +
                    //         "                        <br>" +
                    //         "                        <img src='http://agarioskins.com/submitted/useruploads/Thug%20Cat.png' alt='Avatar' class='w3-left w3-circle w3-margin-right' style='width:60px'>\n" +
                    //         "                        <span class='w3-right w3-opacity' style='margin-right: 50px'>1</span>\n" +
                    //         "                        <h4 class=\"inline\">"+post.firstName+" "+post.lastName.substring(0,1)+"</h4>\n" +
                    //         "                            <p class='inline w3-opacity w3-margin-left'> test</p><br>\n" +
                    //         "                        <hr class='w3-clear'>\n" +
                    //         "                        <p>test message</p>\n" +
                    //         "                    </div>\n" +
                    //         "                </div>";
                    //     $('#getResultDiv .list-group').append(postInfo)
                    // });
                    // console.log("Success: ", result);
                    // }else{
                    //     $("#getResultDiv").html("<strong>Error</strong>");
                    //     console.log("Fail: ", result);
                    // }
                },
                error : function(e) {
                    alert(JSON.stringify(e));
                    // $("#getResultDiv").html("<strong>Error</strong>");
                    // console.log("ERROR: ", e);
                }
            });
        }
    })


</script>
</html>