<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">

<head>
    <title>Index</title>
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.1/css/all.css">
    <link rel="stylesheet" href="../static/css/theme.css" type="text/css" th:href="@{/css/theme.css}"/>
    <link rel="stylesheet" href="../static/css/profile.css" type="text/css" th:href="@{/css/profile.css}"/>
    <link rel="stylesheet" href="../static/css/main.css" type="text/css" th:href="@{/css/main.css}"/>
    <link rel="stylesheet" href="../static/css/pace.css" type="text/css" th:href="@{/css/pace.css}"/>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript" src="../static/js/userProfile.js" th:src="@{/js/userProfile.js}"></script>
</head>

<body>
<button id="b1" type="button">Update 1</button>
<button id="b2"  type="button">Update 2</button>
<button id="b3"  type="button">Update 3</button>
<br>
<div id="replace_div" th:fragment="content1">
    <p th:text="${text}">c1</p>
</div>
<div id="replace_div2" th:fragment="content2">
    <p th:text="${text}">c2</p>
</div>

<!--<div th:fragment="content1">-->
    <!--<p th:text="${text}"></p>-->
<!--</div>-->

<!--<div th:fragment="content2">-->
    <!--<p th:text="${text}"></p>-->
<!--</div>-->


<br>

<div class="w3-col m8">
    <div class="w3-row-padding">
        <!--th:if="${userPagePostList != null}"-->
        <div class="w3-col m12">
            <form id="postFilter" class="w3-white" th:object="${FilterPagePosts}">
                <div class="w3-container w3-padding" style="position: relative">
                    <h6 class="w3-opacity inline">Filters: </h6>
                    <input id="ownerPosts" type="checkbox" class="inline w3-margin-left"><label class="w3-opacity" style="margin-left: 5px">Owner posts</label>
                    <input id="friendsPosts" type="checkbox" class="inline w3-margin-left"><label class="w3-opacity" style="margin-left: 5px">Friends posts</label>
                    <input id="userPostedId" class="w3-border" style="margin-left: 15px" placeholder="User id:" type="text" name="usersPostedIds">
                    <button type="submit">Update</button>
                </div>
            </form>
        </div>
    </div>
    <br>

    <div id="replace_div3" th:fragment="content3">
        <p th:text="${currDate}"></p>
        <br>
        <div th:if="${userPagePostList != null}">
            <div th:each="post : ${userPagePostList}" class="w3-container w3-white w3-margin" style="position: relative">
                <i class="fa fa-bars w3-button w3-text-theme w3-padding-large" style="position: absolute; right: 0"></i>
                <div class="post-menu w3-hide">
                    <div class="post-menu-item w3-opacity">Edit post</div>
                    <div th:onclick="|postDelete('${post.getId()}')|" class="post-menu-item w3-opacity">Delete post</div>
                </div>
                <div>
                    <br>
                    <img src="http://agarioskins.com/submitted/useruploads/Thug%20Cat.png" alt="Avatar" class="w3-left w3-circle w3-margin-right" style="width:60px">
                    <span class="w3-right w3-opacity" th:text="${post.getDatePostedString()}" style="margin-right: 50px">1 min</span>
                    <h4 class="inline" th:text="${post.userPosted.firstName}+' '+${post.userPosted.lastName.substring(0,1)}+'.'">Test User</h4>
                    <p th:text="${post.getTaggedUsersAndLocation()}" class="inline w3-opacity w3-margin-left"> with UserList in Location TODO</p><br>
                    <hr class="w3-clear">
                    <p th:text="${post.message}">Test message</p>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(document).ready(function () {
        loadContent1();
        loadContent2();
        loadContent3();
    });

    $('#b1').click(function () {
        loadContent1();
    });
    $('#b2').click(function () {
        loadContent2();
    });
    $('#b3').click(function () {
        loadContent3();
    });
    $('#postFilter').submit(function () {
        loadContent3();
    });


    function loadContent1() {
        $('#replace_div').load(/content/+"content1");
    }

    function loadContent2() {
        $('#replace_div2').load(/content/+"content2");
    }

    function loadContent3() {
        $.ajax({
            type: "POST",
            url: /content/+"content3",
            dataType: "json",
            data: $('#postFilter').serialize(),
            success: function success() {

            },
            error: function(xhr) {
                alert(xhr.responseText);

            }
        });


        $('#replace_div3').load(/content/+"content3");
    }


</script>
</body>
</html>